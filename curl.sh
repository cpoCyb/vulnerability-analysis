#!/bin/bash

# L'URL à vérifier
FICHIER_URLS="./liste.txt"
echo "Liste des urls problèmatique" > ./ErreurCurl.txt
echo "" > ./ResultCurl.txt

while IFS= read -r url
do
# Utilise curl pour faire une requête HTTP et obtenir le code de réponse HTTP
http_status=$(curl -A "Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/115.0" -o /dev/null --silent --head --write-out '%{http_code}\n' "$url")

# Vérifie si le code de réponse est 200 (OK), 301 (Moved Permanently), ou 302 (Found)
if [ "$http_status" = "200" ] || [ "$http_status" = "301" ] || [ "$http_status" = "302" ]; then
  echo $url >> ResultCurl.txt
else
  echo "ATTENTION : $url n'est pas joignable !"
  echo "ATTENTION : $url n'est pas joignable !" >> ErreurCurl.txt
fi
done < "$FICHIER_URLS"

